(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6446)}])},6446:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return G},default:function(){return J}});var t=n(5893),s=n(9008),a=n(7294),l=n(2804),i=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.filter(Boolean).join(" ")},o=n(4852),c=function(e){var r=(0,l.sJ)(o.I);return(0,t.jsxs)("span",{className:i("error"===r?"text-red-700 bg-red-100 dark:text-red-100 dark:bg-red-700":"","ready"===r?"text-brand-700 bg-brand-100 dark:text-brand-100 dark:bg-brand-700":"","shutdown"===r||"unknown"===r?"text-orange-700 bg-orange-100 dark:text-orange-100 dark:bg-orange-700":"","startup"===r?"text-yellow-700 bg-yellow-100 dark:text-yellow-100 dark:bg-yellow-700":"",null!=e.className?e.className:"","inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold"),children:[(0,t.jsx)("svg",{className:i("error"===r?"text-red-400":"","ready"===r?"text-brand-400":"","shutdown"===r||"unknown"===r?"text-orange-400":"","startup"===r?"text-yellow-400":"","-ml-1 mr-1.5 h-2 w-2"),fill:"currentColor",viewBox:"0 0 8 8",children:(0,t.jsx)("circle",{cx:4,cy:4,r:3})}),"Klipper"]})},d=n(1277),u=function(e){var r=(0,l.sJ)(d.Cv);return(0,t.jsxs)("span",{className:i("not-running"===r?"text-red-700 bg-red-100 dark:text-red-100 dark:bg-red-700":"","connected"===r?"text-brand-700 bg-brand-100 dark:text-brand-100 dark:bg-brand-700":"","connecting"===r?"text-yellow-700 bg-yellow-100 dark:text-yellow-100 dark:bg-yellow-700":"",null!=e.className?e.className:"","inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold"),children:[(0,t.jsx)("svg",{className:i("not-running"===r?"text-red-400":"","connected"===r?"text-brand-400":"","connecting"===r?"text-yellow-400":"","-ml-1 mr-1.5 h-2 w-2"),fill:"currentColor",viewBox:"0 0 8 8",children:(0,t.jsx)("circle",{cx:4,cy:4,r:3})}),"Moonraker"]})},m=n(3153),x=function(e){return(0,t.jsx)("nav",{"aria-label":"Progress",children:(0,t.jsx)("ol",{role:"list",className:"overflow-hidden",children:e.steps.map((function(r,n){return(0,t.jsx)("li",{className:i(n!==e.steps.length-1?"pb-10":"","relative"),children:e.currentStepIndex>n?(0,t.jsxs)(t.Fragment,{children:[n!==e.steps.length-1?(0,t.jsx)("div",{className:"-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full bg-brand-600","aria-hidden":"true"}):null,(0,t.jsxs)("a",{href:r.href,className:"relative flex items-start group",children:[(0,t.jsx)("span",{className:"h-9 flex items-center",children:(0,t.jsx)("span",{className:"relative z-10 w-8 h-8 flex items-center justify-center bg-brand-600 rounded-full group-hover:bg-brand-600",children:(0,t.jsx)(m.nQG,{className:"w-5 h-5 text-white","aria-hidden":"true"})})}),(0,t.jsxs)("span",{className:"ml-4 min-w-0 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-semibold tracking-wide uppercase",children:r.name}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:r.description})]})]})]}):e.currentStepIndex===n?(0,t.jsxs)(t.Fragment,{children:[n!==e.steps.length-1?(0,t.jsx)("div",{className:"-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full bg-gray-300","aria-hidden":"true"}):null,(0,t.jsxs)("a",{href:r.href,className:"relative flex items-start group","aria-current":"step",children:[(0,t.jsx)("span",{className:"h-9 flex items-center","aria-hidden":"true",children:(0,t.jsx)("span",{className:"relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-brand-600 rounded-full",children:(0,t.jsx)("span",{className:"h-2.5 w-2.5 bg-brand-600 rounded-full"})})}),(0,t.jsxs)("span",{className:"ml-4 min-w-0 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-semibold tracking-wide uppercase text-brand-600",children:r.name}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:r.description})]})]})]}):(0,t.jsxs)(t.Fragment,{children:[n!==e.steps.length-1?(0,t.jsx)("div",{className:"-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full bg-gray-300","aria-hidden":"true"}):null,(0,t.jsxs)("a",{href:r.href,className:"relative flex items-start group",children:[(0,t.jsx)("span",{className:"h-9 flex items-center","aria-hidden":"true",children:(0,t.jsx)("span",{className:"relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full group-hover:border-gray-400",children:(0,t.jsx)("span",{className:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300"})})}),(0,t.jsxs)("span",{className:"ml-4 min-w-0 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-semibold tracking-wide uppercase text-gray-500",children:r.name}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:r.description})]})]})]})},r.name)}))})})},h=n(8767),f=n(8520),b=n.n(f),p=n(8510),g=function(e){var r=(0,a.useState)(null),n=r[0],s=r[1],l=e.onSelect,o=(0,a.useCallback)((function(r){void 0===e.value&&s(r),null===l||void 0===l||l(r)}),[l,e.value]);return(0,a.useEffect)((function(){void 0!==e.value&&s(e.value)}),[e.value]),(0,t.jsxs)(p.E,{value:n,onChange:o,children:[(0,t.jsx)(p.E.Label,{className:"sr-only",children:"Server size"}),(0,t.jsx)("div",{className:"space-y-4",children:e.cards.map((function(e,r){return(0,t.jsx)(p.E.Option,{value:e,className:function(e){var r=e.checked,n=e.active;return i(r?"border-transparent":"border-gray-300",n?"ring-2 ring-brand-600":"","relative block bg-white border rounded-lg shadow-sm px-6 py-4 cursor-pointer sm:flex sm:justify-between focus:outline-none")},children:function(r){var n=r.active,s=r.checked;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(p.E.Label,{as:"p",className:"font-bold text-gray-900 text-sm",children:e.name}),(0,t.jsx)(p.E.Description,{as:"div",className:"text-gray-500 text-xs",children:(0,t.jsx)("p",{className:"sm:inline",children:e.details})})]})}),(0,t.jsx)(p.E.Description,{as:"div",className:"mt-2 flex text-sm sm:mt-0 sm:block sm:ml-4 sm:text-right",children:e.right}),(0,t.jsx)("div",{className:i(n?"border":"border-2",s?"border-brand-600":"border-transparent","absolute -inset-px rounded-lg pointer-events-none"),"aria-hidden":"true"})]})}},e.name+r)}))})]})},v=function(){return(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},j=function(e){return(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(m.oOx,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,t.jsx)("p",{children:e.children})})]})]})})},w=0,y=function(e){var r=(0,a.useRef)(w++),n=e.onChange,s=(i("h-5 w-5",(e.error,"text-red-500")),e.error?(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,t.jsx)(m.$Ow,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}):null),l=i(e.error?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 text-gray-900 placeholder-gray-300 focus:ring-brand-600 focus:border-brand-600","block w-full pr-10 focus:outline-none sm:text-sm rounded-md shadow-sm"),o=e.error?(0,t.jsx)("p",{className:"mt-2 text-sm text-red-600",id:r.current+"-error",children:e.error}):null,c=(0,a.useCallback)((function(e){null===n||void 0===n||n(e.currentTarget.value)}),[n]);return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:e.label}),(0,t.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,t.jsx)("input",{type:e.type,className:l,placeholder:e.placeholder,defaultValue:e.defaultValue,onChange:c,"aria-invalid":!!e.error,"aria-describedby":e.error?r.current+"-error":void 0}),s]}),o]})},N=n(9669),k=n.n(N),C=function(e){var r=i("gray"===e.color?"border-zinc-300 bg-gray-100 hover:bg-gray-200 text-black":"","brand"===e.color?"text-black bg-brand-500 hover:bg-brand-600 border-transparent":"",e.disabled?"opacity-60 cursor-not-allowed":"","inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-600");return(0,t.jsx)("button",{className:r,onClick:e.disabled?void 0:e.onClick,children:e.children})},S=function(e){var r,n,s=e.left.isLoading?(0,t.jsx)(v,{}):(0,t.jsx)(m.kK9,{className:"mr-3 h-5 w-5 text-black","aria-hidden":"true"}),a=e.left.onClick?(0,t.jsx)("div",{className:"flex-1 flex justify-start",children:(0,t.jsxs)(C,{color:"gray",disabled:e.left.disabled,onClick:e.left.onClick,children:[s,null!==(r=e.left.label)&&void 0!==r?r:"Previous"]})}):null,l=e.right.isLoading?(0,t.jsx)(v,{}):(0,t.jsx)(m.BZ6,{className:"ml-3 h-5 w-5 text-black-400","aria-hidden":"true"}),i=e.right.onClick?(0,t.jsx)("div",{className:"flex-1 flex justify-end",children:(0,t.jsxs)(C,{color:"brand",disabled:e.right.disabled,onClick:e.right.onClick,children:[null!==(n=e.right.label)&&void 0!==n?n:"Next",l]})}):null;return(0,t.jsx)("div",{className:"px-8 pb-5",children:(0,t.jsxs)("nav",{className:"bg-white py-3 flex items-center justify-between border-t border-gray-200","aria-label":"Pagination",children:[a,i]})})},E=n(5131),P=n(9309),O=n(3801),F=function(e){var r=e.onClick,n=(0,a.useState)(!0),s=n[0],l=n[1],i=(0,a.useCallback)((function(){l(!1),null===r||void 0===r||r()}),[r]),o=e.success?(0,t.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,t.jsx)(O.nQG,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}):null;return(0,t.jsx)(E.u.Root,{show:s,as:a.Fragment,children:(0,t.jsx)(P.V,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:l,children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)(E.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)(P.V.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,t.jsx)(E.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,t.jsxs)("div",{className:"relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6",children:[(0,t.jsxs)("div",{children:[o,(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,t.jsx)(P.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:e.title}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.body})})]})]}),(0,t.jsx)("div",{className:"mt-5 sm:mt-6",children:(0,t.jsx)("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-brand-600 text-base font-medium text-white hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 sm:text-sm",onClick:i,children:e.buttonLabel})})]})})]})})})},_=n(1752);function L(e,r,n,t,s,a,l){try{var i=e[a](l),o=i.value}catch(c){return void n(c)}i.done?r(o):Promise.resolve(o).then(t,s)}function R(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var a=e.apply(r,n);function l(e){L(a,t,s,l,i,"next",e)}function i(e){L(a,t,s,l,i,"throw",e)}l(void 0)}))}}function M(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var V=function(e){var r=(0,a.useState)({}),n=r[0],s=r[1],i=(0,a.useState)(null),o=i[0],c=i[1],u=(0,a.useState)(""),x=u[0],f=u[1],p=(0,l.sJ)(d.V5),w=(0,h.useQuery)("accessPoints",R(b().mark((function e(){var r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((0,_.default)().publicRuntimeConfig.basePath+"/api/wifi/scan");case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Error while scanning for wifi networks.");case 5:return e.next=7,r.json();case 7:if("error"!==(null===(n=e.sent)||void 0===n?void 0:n.result)){e.next=10;break}throw new Error(n.data.message);case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)}))),{refetchInterval:function(e,r){return!r.state.error&&1e3}}),N=(w.isLoading,w.isError),C=w.error,E=w.data;(0,a.useEffect)((function(){s((function(e){var r=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){M(e,r,n[r])}))}return e}({},e);return null===E||void 0===E||E.accessPoints.forEach((function(e){r[e.address]=e})),r}))}),[E]);var P=(0,a.useMemo)((function(){return N?[]:Object.keys(n).map((function(r){return{name:null!==(e=n[r].ssid)&&void 0!==e?e:"Unknown Network",id:r,details:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"mr-4",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Signal Strength:"})," ",(s=n[r].signal,s>=-40?(0,t.jsx)("span",{className:"text-green-700 font-semibold",children:"Excellent"}):s>=-67?(0,t.jsx)("span",{className:"text-lime-600 font-semibold",children:"Very good"}):s>=-70?(0,t.jsx)("span",{className:"text-yellow-600 font-semibold",children:"Okay"}):s>=-80?(0,t.jsx)("span",{className:"text-orange-500 font-semibold",children:"Not good"}):s>=-100?(0,t.jsx)("span",{className:"text-red-600 font-semibold",children:"Unusable"}):void 0)]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Frequency:"})," ",Math.round(n[r].frequency/100)/10,"GHz"]})]}),right:(0,t.jsx)(m.kVp,{className:"h-8 w-8 text-slate-500"})};var s}));var e}),[N,n]),O=(0,a.useCallback)((function(e){c(n[e.id])}),[n]),L=(0,h.useMutation)((function(e){return k().post((0,_.default)().publicRuntimeConfig.basePath+"/api/wifi/join",e).then((function(e){if("error"===e.data.result)throw new Error(e.data.data.message);return!0}))})),V=(0,a.useCallback)((function(){if(null==o||null==o.ssid)throw new Error("Cannot join wifi without selecting a network");L.mutate({passphrase:x,ssid:o.ssid,country:o.country})}),[x,o,L]),z=(0,h.useMutation)((function(){return p?p("machine.reboot"):Promise.reject("Cannot reboot raspberry pi: No connection to moonraker")})),B=(0,a.useCallback)(R(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutateAsync();case 2:window.close();case 3:case"end":return e.stop()}}),e)}))),[z]),T=o&&L.isSuccess?(0,t.jsx)(F,{title:"Settings saved!",body:"RatOS is now setup to connect to ".concat(o.ssid,"! Your raspberry pi will now reboot, and join your local wifi network. Click the button below to reboot the pi and close this window. You can then reconnect to your local network where http://RatOS.local/ should be available in a few minutes. If RatOS fails to join ").concat(o.ssid,', it will recreate the "ratos" hotspot and you\'ll have to try again.'),buttonLabel:"Got it!",onClick:B}):o?(0,t.jsx)(y,{label:o.security.toLocaleUpperCase()+" Password",type:"password",error:L.isError?L.error:void 0,onChange:f}):N?(0,t.jsx)("div",{className:"mb-4 h-48",children:(0,t.jsx)(j,{children:null===C||void 0===C?void 0:C.message})}):z.isError?(0,t.jsx)("div",{className:"mb-4 h-48",children:(0,t.jsx)(j,{children:z.error})}):z.isLoading||z.isSuccess?(0,t.jsxs)("div",{className:"mb-4 h-48",children:[(0,t.jsx)("div",{className:"flex justify-center items-center mb-4 h-8",children:"Rebooting..."}),(0,t.jsx)("div",{className:"flex justify-center items-center mb-4 h-48",children:(0,t.jsx)(v,{})})]}):0===Object.keys(n).length?(0,t.jsx)("div",{className:"flex justify-center items-center mb-4 h-48",children:(0,t.jsx)(v,{})}):(0,t.jsx)(g,{cards:P,onSelect:O}),I={onClick:e.nextScreen,label:"Skip"},Q={onClick:e.previousScreen};return o&&(I={label:"Connect",disabled:0===x.trim().length||L.isLoading,isLoading:L.isLoading,onClick:V},Q={onClick:function(){return c(null)},label:"Back",isLoading:L.isLoading,disabled:L.isLoading},L.isSuccess&&(I={onClick:e.nextScreen},Q={})),(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)("div",{className:"p-8",children:[" ",(0,t.jsxs)("div",{className:"pb-5 mb-5 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Configure Wifi Setup"}),(0,t.jsx)("p",{className:"mt-2 max-w-4xl text-sm text-gray-500",children:"Pick an access point to join"})]}),T]}),(0,t.jsx)(S,{right:I,left:Q})]})};function z(e,r,n,t,s,a,l){try{var i=e[a](l),o=i.value}catch(c){return void n(c)}i.done?r(o):Promise.resolve(o).then(t,s)}function B(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var a=e.apply(r,n);function l(e){z(a,t,s,l,i,"next",e)}function i(e){z(a,t,s,l,i,"throw",e)}l(void 0)}))}}var T=function(e){var r=(0,a.useState)(null),n=r[0],s=r[1],i=(0,l.sJ)(d.V5),o=(0,h.useQuery)("boards",B(b().mark((function e(){var r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((0,_.default)().publicRuntimeConfig.basePath+"/api/mcu/boards");case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Error while retrieving board definitions");case 5:return e.next=7,r.json();case 7:if("error"!==(null===(n=e.sent)||void 0===n?void 0:n.result)){e.next=10;break}throw new Error(n.data.message);case 10:return e.abrupt("return",n.data.boards);case 11:case"end":return e.stop()}}),e)})))),c=(0,h.useMutation)(B(b().mark((function e(r){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i){e.next=2;break}throw new Error("Moonraker not connected");case 2:return e.next=4,i("server.database.post_item",{namespace:"RatOS",key:"selectedBoard",value:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))),u=(0,h.useQuery)("selectedBoard",B(b().mark((function e(){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i){e.next=2;break}throw new Error("Moonraker not connected");case 2:return e.next=4,i("server.database.get_item",{namespace:"RatOS",key:"selectedBoard"});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))),m=(0,a.useCallback)((function(e){c.mutate(e.board),s(e)}),[c]),x={onClick:e.nextScreen,label:"Next",disabled:!0},f={onClick:e.previousScreen};n&&(x={onClick:e.nextScreen,label:"Next"});var p,v=(0,a.useMemo)((function(){return o.isError||null==o.data?[]:o.data.map((function(e){return{board:e,name:e.manufacturer+" "+e.name,details:(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Automatic flashing:"})," ",e.flashScript?"Yes":"No"]}),right:(0,t.jsx)(O.PCN,{className:"h-8 w-8 text-slate-500"})}}))}),[o.isError,o.data]);(0,a.useEffect)((function(){var e=v.find((function(e){var r;return e.board.serialPath===(null===(r=u.data)||void 0===r?void 0:r.value.serialPath)}));s(null!==e&&void 0!==e?e:null)}),[u.data,v]);var j=null!==(p=I(o))&&void 0!==p?p:(0,t.jsx)(g,{cards:v,value:n,onSelect:m});return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)("div",{className:"p-8",children:[" ",(0,t.jsxs)("div",{className:"pb-5 mb-5 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Control board preparation"}),(0,t.jsx)("p",{className:"mt-2 max-w-4xl text-sm text-gray-500",children:"Pick your control board"})]}),j]}),(0,t.jsx)(S,{right:x,left:f})]})},I=function(e){var r;return e.isError?(0,t.jsx)("div",{className:"mb-4 h-48",children:(0,t.jsx)(j,{children:null===(r=e.error)||void 0===r?void 0:r.message})}):e.isFetching?(0,t.jsx)("div",{className:"flex justify-center items-center mb-4 h-48",children:(0,t.jsx)(v,{})}):null},Q=n(1163);function W(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function q(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){W(e,r,n[r])}))}return e}var A=new h.QueryClient,D=[{id:"00",name:"Wifi Setup",description:"Setup Wifi Connectivity",href:"#",renderScreen:function(e){return(0,t.jsx)(V,q({},e))}},{id:"01",name:"MCU Preparation",description:"Initial firmware flashing and connectivity",href:"#",renderScreen:function(e){return(0,t.jsx)(T,q({},e))}}],G=!0,J=function(e){var r=(0,Q.useRouter)(),n=r.query.step?parseInt(r.query.step,10):null,l=(0,a.useState)(null==n||isNaN(n)?e.isConnectedToWifi&&D.length>1?1:0:n),i=l[0],o=l[1],d=(0,a.useRef)(i);d.current=i,(0,a.useEffect)((function(){n&&!isNaN(n)&&n!==d.current&&o(n)}),[n]);var m=i<D.length-1,f=i>0,b=(0,a.useCallback)((function(){o((function(e){return r.push("/?step="+(e+1),void 0,{shallow:!0}),e+1}))}),[r]),p=(0,a.useCallback)((function(){o((function(e){return r.push("/?step="+(e-1),void 0,{shallow:!0}),e-1}))}),[r]),g={hasNextScreen:m,hasPreviousScreen:f,nextScreen:m?b:void 0,previousScreen:f?p:void 0};return(0,t.jsx)(h.QueryClientProvider,{client:A,children:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)(s.default,{children:[(0,t.jsx)("title",{children:"RatOS Configurator"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 md:flex md:items-center md:justify-between md:space-x-5 lg:max-w-7xl lg:px-8",children:[(0,t.jsx)("div",{className:"flex items-center space-x-5",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Printer Setup"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"RatOS Version v1.0.1"})]})}),(0,t.jsxs)("div",{className:"mt-6 flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-reverse sm:space-y-0 sm:space-x-3 md:mt-0 md:flex-row md:space-x-3",children:[(0,t.jsx)(c,{}),(0,t.jsx)(u,{})]})]}),(0,t.jsxs)("div",{className:"mt-8 max-w-3xl mx-auto grid grid-cols-1 gap-6 sm:px-6 lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-3",children:[(0,t.jsx)("div",{className:"lg:col-start-1 lg:col-span-2",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden ",children:D[i].renderScreen(g)})}),(0,t.jsx)("div",{className:"space-y-6 lg:col-start-3 lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden p-8",children:[(0,t.jsx)("div",{className:"pb-5 mb-5 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Setup Progress"})}),(0,t.jsx)(x,{steps:D,currentStepIndex:i})]})})]})]})})}}},function(e){e.O(0,[26,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);